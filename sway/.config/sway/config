# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout somewhen, delete
# this file and re-run i3-config-wizard(1).

input * {
    xkb_layout 'es'
    xkb_variant ""
    xkb_options "altwin:swap_lalt_lwin,caps:escape"
} 

output DP-3 pos 0 0
output DP-4 pos 2560 0

set $scripts $HOME/.config/i3/scripts
set $locker $scripts/lock-screen.sh && sleep 1
set $terminal alacritty

set $mod Mod4
set $workspace1 "1"
set $workspace2 "2"
set $workspace3 "3"
set $workspace4 "4"
set $workspace5 "5"
set $workspace6 "6"
set $workspace7 "7"
set $workspace8 "8"
set $workspace9 "9"
set $workspace0 "0"

workspace $workspace1 output HDMI1
workspace $workspace2 output HDMI1
workspace $workspace5 output HDMI1
workspace $workspace4 output HDMI1
workspace $workspace3 output HDMI2
workspace $workspace6 output HDMI2
workspace $workspace7 output HDMI2
workspace $workspace8 output HDMI2
workspace $workspace9 output HDMI2
workspace $workspace0 output HDMI1


bindsym $mod+z move workspace to output left
bindsym $mod+x move workspace to output right

bindsym shift+$mod+1 move to workspace $workspace1
bindsym shift+$mod+2 move to workspace $workspace2
bindsym shift+$mod+3 move to workspace $workspace3
bindsym shift+$mod+4 move to workspace $workspace4
bindsym shift+$mod+5 move to workspace $workspace5
bindsym shift+$mod+6 move to workspace $workspace6
bindsym shift+$mod+7 move to workspace $workspace7
bindsym shift+$mod+8 move to workspace $workspace8
bindsym shift+$mod+9 move to workspace $workspace9
bindsym shift+$mod+0 move to workspace $workspace0

workspace_auto_back_and_forth yes

bindsym $mod+q workspace back_and_forth
bindsym $mod+Control+Left workspace prev
bindsym $mod+Control+Right workspace next

bindsym Print exec xfce4-screenshooter
bindsym $mod+c exec gnome-calculator
bindsym $mod+g exec gnome-control-center

bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +2%
bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -2%
bindsym XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle
bindsym XF86MonBrightnessDown exec brightnessctl set 5%-
bindsym XF86MonBrightnessUp exec brightnessctl set +5%
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

# font for window titles. ISO 10646 = Unicode
font pango:DejaVu Sans Mono 12, icomoon 12

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
bindsym $mod+Return exec $terminal

# kill focused window
bindsym $mod+Shift+Q kill

# start dmenu (a program launcher)
bindsym $mod+d exec rofi -lines 12 -padding 18 -width 60 -location 0 -show drun -sidebar-mode -columns 3 -font 'Noto Sans 12'
bindsym $mod+shift+d exec dmenu_run

# change focus
bindsym $mod+j focus left
bindsym $mod+k focus down
bindsym $mod+l focus up
bindsym $mod+ntilde focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+J move left
bindsym $mod+Shift+K move down
bindsym $mod+Shift+L move up
bindsym $mod+Shift+Ntilde move right

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+h split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen

# change container layout (stacked, tabbed, default)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout default

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# toggle sticky for floating windows (follows you across desktops)
bindsym $mod+Shift+s sticky toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
#bindcode $mod+d focus child

# switch to workspace
bindsym $mod+1 workspace $workspace1
bindsym $mod+2 workspace $workspace2
bindsym $mod+3 workspace $workspace3
bindsym $mod+4 workspace $workspace4
bindsym $mod+5 workspace $workspace5
bindsym $mod+6 workspace $workspace6
bindsym $mod+7 workspace $workspace7
bindsym $mod+8 workspace $workspace8
bindsym $mod+9 workspace $workspace9
bindsym $mod+0 workspace $workspace0
bindsym $mod+minus scratchpad show

# move focused container to workspace
bindsym $mod+Shift+exclam          move workspace $workspace1
bindsym $mod+Shift+quotedbl        move workspace $workspace2
bindsym $mod+Shift+periodcentered  move workspace $workspace3
bindsym $mod+Shift+dollar          move workspace $workspace4
bindsym $mod+Shift+percent         move workspace $workspace5
bindsym $mod+Shift+ampersand       move workspace $workspace6
bindsym $mod+Shift+slash           move workspace $workspace7
bindsym $mod+Shift+parenleft       move workspace $workspace8
bindsym $mod+Shift+parenright      move workspace $workspace9
bindsym $mod+Shift+equal           move workspace $workspace0
bindsym $mod+Shift+minus move scratchpad

# reload the configuration file
bindsym $mod+Shift+C reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+R restart

# resize window (you can also use the mouse for that)
mode "resize" {
    # same bindings, but for the arrow keys
    bindsym Left        resize shrink width 10 px or 1 ppt
    bindsym Down        resize grow height 10 px or 1 ppt
    bindsym Up          resize shrink height 10 px or 1 ppt
    bindsym Right       resize grow width 10 px or 1 ppt

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

bindsym $mod+t mode "resize"

set $mode_system (l) lock, (e) logout, (s) suspend, (h) halt, (r) reboot
mode "$mode_system" {
    bindsym l exec --no-startup-id $locker, mode "default"
    bindsym e exec --no-startup-id i3-msg exit, mode "default"
    bindsym s exec --no-startup-id systemctl suspend && $locker, mode "default"
    bindsym $mod+Escape exec --no-startup-id systemctl suspend && $locker, mode "default"
    bindsym r exec --no-startup-id systemctl reboot, mode "default"
    bindsym h exec --no-startup-id systemctl poweroff -i, mode "default"

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

bindsym $mod+Delete mode "$mode_system"
bindsym $mod+Escape mode "$mode_system"
bindsym $mod+Control+l exec $locker


mode "Webcam control: 1 2 3 4 5" {
    bindsym 1 exec --no-startup-id v4l2-ctl -d /dev/video0  --set-ctrl=backlight_compensation=1
    bindsym 2 exec --no-startup-id v4l2-ctl -d /dev/video0  --set-ctrl=backlight_compensation=2
    bindsym 3 exec --no-startup-id v4l2-ctl -d /dev/video0  --set-ctrl=backlight_compensation=3
    bindsym 4 exec --no-startup-id v4l2-ctl -d /dev/video0  --set-ctrl=backlight_compensation=4
    bindsym 5 exec --no-startup-id v4l2-ctl -d /dev/video0  --set-ctrl=backlight_compensation=5
    
    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+p mode "Webcam control: 1 2 3 4 5"

bar {
  colors {
    background #282A36
    statusline #F8F8F2
    separator  #44475A

    focused_workspace  #44475A #44475A #F8F8F2
    active_workspace   #282A36 #44475A #F8F8F2
    inactive_workspace #282A36 #282A36 #BFBFBF
    urgent_workspace   #FF5555 #FF5555 #F8F8F2
    binding_mode       #FF5555 #FF5555 #F8F8F2
  }

  status_command i3status
  position top
}

## Colours
##---------
# class                 border  bground text    indicator child_border
client.focused          #6272A4 #6272A4 #F8F8F2 #6272A4   #6272A4
client.focused_inactive #44475A #44475A #F8F8F2 #44475A   #44475A
client.unfocused        #282A36 #282A36 #BFBFBF #282A36   #282A36
client.urgent           #44475A #FF5555 #F8F8F2 #FF5555   #FF5555
client.placeholder      #282A36 #282A36 #F8F8F2 #282A36   #282A36

client.background       #F8F8F2


# Use xprop to get information about a window
# Criterias available
#
# class
#   Compares the window class (the second part of WM_CLASS)
# instance
#   Compares the window instance (the first part of WM_CLASS)
# window_role
#   Compares the window role (WM_WINDOW_ROLE).
# id
#   Compares the X11 window ID, which you can get via xwininfo for example.
# title
#   Compares the X11 window title (_NET_WM_NAME or WM_NAME as fallback).
# urgent
#   Compares the urgent state of the window. Can be "latest" or "oldest". Matches the latest or oldest urgent window, respectively. (The following aliases are also available: newest, last, recent, first)
# con_mark
#   Compares the mark set for this container, see [vim_like_marks].
# con_id
#   Compares the i3-internal container ID, which you can get via the IPC interface. Handy for scripting.

assign [class="Sublime_text"] $workspace1
assign [class="google-chrome"] $workspace3
assign [class="Firefox"] $workspace3
assign [class="Wine" instance="SQLyog.exe"] $workspace5
assign [class="empathy"] $workspace4
assign [class="Empathy"] $workspace4
assign [class="Slack"] $workspace4

# Spotify needs special case (https://github.com/i3/i3/issues/2060)
assign [class="spotify"] workspace $workspace4
for_window [class="Spotify"] move to workspace $workspace4

# Float windows by role
for_window [window_role="pop-up"]       floating enable
for_window [window_role="bubble"]       floating enable 
for_window [window_role="task_dialog"]  floating enable
for_window [window_role="Preferences"]  floating enable
for_window [window_type="dialog"]       floating enable 
for_window [window_type="menu"]         floating enable

# Float specific apps or windows
for_window [class="Gtkdialog"] floating enable
for_window [class="Gnome-control-center"] floating enable
for_window [class="Firefox" window_role="Preferences"] floating enable
for_window [class="Firefox" instance="Download"] floating enable
for_window [class="X-terminal-emulator" title="Terminator Preferences"] floating enable
for_window [class="Update-manager"] floating enable
for_window [class="Gcr-prompter"] floating enable
for_window [class="Gnome-keyring-prompt-3"] floating enable
for_window [class="Gnome-system-monitor"] floating enable
for_window [class="Gnome-calculator"] floating enable
for_window [title="Preferencias"] floating enable
for_window [title="Preferences"] floating enable
for_window [class="Apport-gtk"] floating enable
for_window [class="Agave"] floating enable
for_window [class="Gcalctool"] floating enable
for_window [class="Komodo edit" instance="Update"] floating enable
for_window [class="Komodo edit" instance="Komodo_gotofile"] floating enable
for_window [class="Nautilus" instance="file_progress"] floating enable
for_window [class="Gstm"] floating enable
for_window [class="Qpaeq"] floating enable
for_window [class="qjackctl"] floating enable
for_window [class="carla"] floating enable
for_window [window_role="GtkFileChooserDialog"] floating enable

# launch applications

# Xsettingsd is a lightweight xsettings daemon which provides settings to Xorg applications via the XSETTINGS specification when not running one (like when using KDE). Some applications like Java or Wine does not get the font settings through fontconfig so this is necessary to provide setting like anti-aliasing and font hinting.
exec --no-startup-id xsettingsd &

# Open default terminal in worspace 2
exec --no-startup-id i3-msg 'workspace $workspace2; exec $terminal'

# Run compton for desktop composition
exec --no-startup-id compton --config ~/.config/compton.conf

# Turn off monitors after user is inactive for some time
exec --no-startup-id xset +dpms dpms 0 300 0

# For laptops, dimm screen brightness on inactivity
exec --no-startup-id brightd -w 200 -b 5 -f

# Lock screen if user is inactive for some time
exec --no-startup-id xautolock -time 10 -locker $locker

# xbindkeys to handle multimedia keys
exec --no-startup-id xbindkeys

# Load wallpapers
exec --no-startup-id nitrogen --restore

# Xiccd is required to load screen color profiles
exec --no-startup-id xiccd

# Swap left alt and left windows keys
exec --no-startup-id setxkbmap -layout es -option altwin:swap_lalt_lwin -option caps:escape

# Load per-machine custom settings
exec --no-startup-id $scripts/custom-setup.sh
